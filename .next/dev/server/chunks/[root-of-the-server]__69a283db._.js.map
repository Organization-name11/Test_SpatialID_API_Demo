{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Test_SpatialID_API_Demo/pages/api/spatial-id.js"],"sourcesContent":["import { Space } from 'ouranos-gex-lib-for-javascript';\n\nexport default function handler(req, res) {\n  const { lat, lon, zoom = '25', alt } = req.query;\n\n  const latNum = parseFloat(lat);\n  const lonNum = parseFloat(lon);\n  const zoomNum = parseInt(zoom, 10);\n  const altNum = alt !== undefined ? parseFloat(alt) : undefined;\n\n  if (Number.isNaN(latNum) || Number.isNaN(lonNum)) {\n    res.status(400).json({ error: 'lat と lon は必須です' });\n    return;\n  }\n  if (latNum < -85.0511287798 || latNum > 85.0511287798) {\n    res.status(400).json({ error: 'lat の範囲は ±85.0511287798' });\n    return;\n  }\n  if (lonNum < -180 || lonNum > 180) {\n    res.status(400).json({ error: 'lon の範囲は ±180' });\n    return;\n  }\n  if (zoomNum < 0 || zoomNum > 35) {\n    res.status(400).json({ error: 'zoom は 0〜35' });\n    return;\n  }\n\n  try {\n    const space = new Space({ lng: lonNum, lat: latNum, alt: altNum }, zoomNum);\n    res.setHeader('Access-Control-Allow-Origin', '*'); // デモ用CORS\n    res.status(200).json({\n      result: {\n        zfxyStr: space.zfxyStr,\n        tilehash: space.tilehash,\n        zfxy: space.zfxy,\n        zoom: space.zoom,\n        center: space.center,\n        alt: space.alt\n      }\n    });\n  } catch (e) {\n    res.setHeader('Access-Control-Allow-Origin', '*'); // デモ用CORS\n    res.status(500).json({ error: String(e) });\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEe,SAAS,QAAQ,GAAG,EAAE,GAAG;IACtC,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,OAAO,IAAI,EAAE,GAAG,EAAE,GAAG,IAAI,KAAK;IAEhD,MAAM,SAAS,WAAW;IAC1B,MAAM,SAAS,WAAW;IAC1B,MAAM,UAAU,SAAS,MAAM;IAC/B,MAAM,SAAS,QAAQ,YAAY,WAAW,OAAO;IAErD,IAAI,OAAO,KAAK,CAAC,WAAW,OAAO,KAAK,CAAC,SAAS;QAChD,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAkB;QAChD;IACF;IACA,IAAI,SAAS,CAAC,iBAAiB,SAAS,eAAe;QACrD,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAA0B;QACxD;IACF;IACA,IAAI,SAAS,CAAC,OAAO,SAAS,KAAK;QACjC,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAgB;QAC9C;IACF;IACA,IAAI,UAAU,KAAK,UAAU,IAAI;QAC/B,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAc;QAC5C;IACF;IAEA,IAAI;QACF,MAAM,QAAQ,IAAI,MAAM;YAAE,KAAK;YAAQ,KAAK;YAAQ,KAAK;QAAO,GAAG;QACnE,IAAI,SAAS,CAAC,+BAA+B,MAAM,UAAU;QAC7D,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YACnB,QAAQ;gBACN,SAAS,MAAM,OAAO;gBACtB,UAAU,MAAM,QAAQ;gBACxB,MAAM,MAAM,IAAI;gBAChB,MAAM,MAAM,IAAI;gBAChB,QAAQ,MAAM,MAAM;gBACpB,KAAK,MAAM,GAAG;YAChB;QACF;IACF,EAAE,OAAO,GAAG;QACV,IAAI,SAAS,CAAC,+BAA+B,MAAM,UAAU;QAC7D,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO,OAAO;QAAG;IAC1C;AACF"}}]
}